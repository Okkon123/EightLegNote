## 为什么要使用消息队列
1. 解耦
2. 异步
3. 削峰

## 为什么选择RocketMQ

**选择中间件的可以从这些维度：**
1. 可靠性
2. 性能
3. 功能
4. 可运维行
5. 可拓展性
6. 社区活跃度。
![[Pasted image 20240404220356.png]]
RabbitMQ：
优点：轻量、迅捷、容易部署和使用，拥有灵活的路由配置
缺点：性能和吞吐量不太理想，不容易进行二次开发

RocketMQ：
优点：性能好，高吞吐量，稳定可靠，有活跃的中文社区
缺点：兼容性不好

Kafka：
优点：拥有强大的性能及吞吐量，兼容性好
缺点：延迟比较高

## RocketMQ有什么优缺点
**优点：**
1. 单机吞吐量高
2. 可用性非常高，分布式架构
3. 消息可靠性高，经过优化消息可以0丢失
4. 功能支持比较完善，扩展性好
5. 支持10亿级别的消息堆积，不会因为消息堆积导致性能下降
6. 源码是JAVA，方便二次开发
7. 可靠性高，适应互联网金融领域
8. RocketMQ在稳定性上值得依赖
可用、可靠、稳定、完善

**缺点：**
1. 支持的客户端语言不多
2. 没有在MQ核心中实现JMS等接口，部分系统迁移时需要修改大量代码

## 消息队列有哪些消息模型
**队列模型**
![[Pasted image 20240404221356.png]]
**发布/订阅模型**
![[Pasted image 20240404221424.png]]

## RocketMQ的消息模型
![[Pasted image 20240404221530.png]]
![[Pasted image 20240404221723.png]]
1. Message
2. Topic
3. Tag
4. Group
5. Message Queue
6. Offset

## 消息的消费模式
![[Pasted image 20240404221848.png]]
1. 集群消费
2. 广播消费

## RocketMQ基本架构
![[Pasted image 20240404222318.png]]
![[Pasted image 20240404222624.png]]
### 1. NameServer
功能：
1. 维护Topic的路由信息
2. 和Broker保持长连接

特点：
1. 每个NameServer节点间相互独立额，彼此之间无信息交互
2. NameServer被设计为无状态

### 2. Broker
![[Pasted image 20240404223043.png]]
功能：
消息存储和中转角色，负责存储和转发消息。

### 3. Producer
消息生产者，业务端负责发送消息，由用户自行实现和分布式部署

三种发送信息方式：
1. 同步发送
2. 异步发送
3. 单向发送

### 4. Consumer
消息消费者，负责消费消息，一般是后台系统负责异步消费。

消费模式：
1. 集群消费
2. 广播消费

1. pull
2. push
